{% extends "dashboard/base.html" %}
{% load staticfiles addendum_tags account socialaccount avatar_tags compress profile_tags %}

{% block page_header %}
    <link href="{% static 'framebuzz/dashboard/theme/assets/font-awesome/css/font-awesome.css' %}" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="{% static 'framebuzz/dashboard/theme/assets/css/zabuto_calendar.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'framebuzz/dashboard/theme/assets/js/gritter/css/jquery.gritter.css' %}" />
    <script src="{% static 'framebuzz/dashboard/theme/assets/js/chart-master/Chart.js' %}"></script>
{% endblock %}

{% block page_content %}
  <section class="wrapper site-min-height home-wrapper">
      <div class="row">
          <div class="col-lg-9 main-chart">   
            <br><br><br>
          </div><!-- /col-lg-9 END SECTION MIDDLE -->
          <div class="col-lg-3 ds site-min-height">
            <!--COMPLETED ACTIONS DONUTS CHART-->
            <div class="donut-main">
              <!-- RECENT ACTIVITIES SECTION -->
              <h4 class="centered">RECENT AUDIENCE ACTIVITY</h4>
              {% for action in activities %}
                <div class="desc col-xs-10">
                  <div class="thumb">
                      <img class="img-circle" src="{% avatar_url action.actor 70 %}" width="35" height="35">
                  </div>
                  <div class="details">
                      <p><muted>{{ action.timestamp|timesince }} ago</muted><br/>
                         {% include 'dashboard/snippets/action.html' %}
                      </p>
                  </div>
                </div>
               {% empty %}
                 <div class="desc col-xs-10">
                      <div class="thumb">
                      </div>
                      <div class="details">
                          <p>No viewer activities yet!</p>
                      </div>
                </div>
              {% endfor %}
          </div>
      </div>
  </section>
{% endblock %}

{% block page_javascript %}
    {% compress js %}
        <script type="text/javascript" src="{% static 'framebuzz/dashboard/theme/assets/js/gritter/js/jquery.gritter.js' %}"></script>
        <script type="text/javascript" src="{% static 'framebuzz/dashboard/theme/assets/js/gritter-conf.js' %}"></script>

        <!--script for this page-->
        <script src="{% static 'framebuzz/dashboard/theme/assets/js/jquery.sparkline.js' %}"></script>
        <script src="{% static 'framebuzz/dashboard/theme/assets/js/sparkline-chart.js' %}"></script>    
        <script src="{% static 'framebuzz/dashboard/theme/assets/js/zabuto_calendar.js' %}"></script>    
        
        <script type="application/javascript">
            $(document).ready(function () {
                $("#date-popover").popover({html: true, trigger: "manual"});
                $("#date-popover").hide();
                $("#date-popover").click(function (e) {
                    $(this).hide();
                });
            
                $("#my-calendar").zabuto_calendar({
                    action: function () {
                        return myDateFunction(this.id, false);
                    },
                    action_nav: function () {
                        return myNavFunction(this.id);
                    },
                    ajax: {
                        url: "show_data.php?action=1",
                        modal: true
                    },
                    legend: [
                        {type: "text", label: "Special event", badge: "00"},
                        {type: "block", label: "Regular event", }
                    ]
                });
            });
            
            
            function myNavFunction(id) {
                $("#date-popover").hide();
                var nav = $("#" + id).data("navigation");
                var to = $("#" + id).data("to");
                console.log('nav ' + nav + ' to: ' + to.month + '/' + to.year);
            }
        </script>
    {% endcompress %}
{% endblock %}