{% load staticfiles socialaccount compress %}
<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Article">
    <head ng-app>
      <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script>
      <title>FrameBuzz | {{ video.title }}</title>
      {% if close_window %}
        <script type="text/javascript">
          window.opener.location.reload();
          window.close();
        </script>
      {% endif %}
      <meta name="description" content="{{ video.description }}" />
      <meta property="og:title" content="FrameBuzz: {{ video.title }}" />
      <meta property="og:type" content="Video" />
      <meta property="og:url" content="http://{{ current_site }}{{ video.get_absolute_url }}" />
      <meta property="og:image" content="{{ video.default_thumbnail.url }}" />
      <meta property="og:description" content="I'm watching {{ video.title }}. Come talk about it with me on FrameBuzz!" />
      <meta property="og:site_name" content="FrameBuzz" />
      <meta itemprop="name" content="FrameBuzz: {{ video.title }}" />
      <meta itemprop="description" content="I'm watching {{ video.title }}. Come talk about it with me on FrameBuzz!" />
      <meta itemprop="image" content="{{ video.default_thumbnail.url }}" />
      {% compress css %}
        <style type="text/css">
            .restricted {width:700px; height:400px; overflow-y: hidden;}
            #content { padding: 0; }
        </style>
      {% endcompress %}
    </head>
    <body ngapp>
      {% providers_media_js %}
      <div id="content">
          <div id="video-wrapper">
            <video width="505" height="284" id="ytVideo" preload="none" type="video/x-youtube" src="http://www.youtube.com/watch?v={{ video.video_id }}"></video>
          </div>
          {% verbatim %}{% endverbatim %}
      </video>
          </div>
      </div>
    <script>
      var SOCK = {
        host: location.hostname,
        port: {{ socket_port }},
        channel: '{{ socket_channel }}',
        video_channel: '/framebuzz/video/' + '{{ video.video_id }}'
      };
    </script>
    <script src="http://cdn.sockjs.org/sockjs-0.3.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular-resource.min.js"></script>
    {% compress js %}
      <script src="{% static 'framebuzz/js/vendor/jquery-1.9.1.min.js' %}"></script>
      <script src="{% static 'framebuzz/js/vendor/mediaelement-and-player.js' %}"></script>
      <script src="{% static 'framebuzz/js/plugins.js' %}"></script>
      <script src="{% static 'framebuzz/js/player.js' %}"></script>
      <script>
        $(document).ready(function() {
          var player = new MediaElementPlayer('#ytVideo', {
            features: ['youtube','progress'],
            flashName: '../../swf/flashmediaelement.swf',
            silverlightName: '../../swf/silverlightmediaelement.xap',
            alwaysShowControls: true,
            // There's a bug here where commenting and hitting the spacebar will
            // cause the space to not be entered, and the video to pause.
            enableKeyboard: false,
            timerRate: 900,
              success: function (media) {
                videoPlayer = media;

                media.addEventListener('timeupdate', function(e) {

                }, false);

                media.addEventListener('playing', function(e) {

                }, false);

                media.addEventListener('pause', function(e) {
                  $('.mejs-video').unbind('hover');
                  $('.mejs-overlay-play').hide().addClass('mejs-overlay-pause').fadeIn(500).show();
                }, false);
              }
          });
        });
      </script>
    {% endcompress %}
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-40966336-1', 'framebuzz.com');
      ga('send', 'pageview');
    </script>
  </body>
</html>