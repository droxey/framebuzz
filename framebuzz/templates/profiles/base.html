{% extends "marketing/base.html" %}
{% load staticfiles compress avatar_tags activity_tags %}

{% block title %}{{ profile_user.username }}'s Profile{% endblock %}

{% block page_css %}
    {% compress css %}
        <link rel="stylesheet" href="{% static 'framebuzz/profiles/stylesheets/screen.css' %}" type="text/css" media="screen" />
    {% endcompress %}
    {% block extra_css %}{% endblock %}
{% endblock %}

{% block marketing_content %}
    <div id="fb">
        <div class="content">
            <div class="wrapper clearfix">
                <div class="background">
                    <div id="profile-container" class="clearfix{% if is_share %} video{% endif %}">                        
                        <nav id="profile-sections" class="span4">
                            <div class="user-info clearfix">
                                <a data-url="{% url 'profiles-activity' profile_user.username %}" href="#activity" class="tab-link avatar">
                                    <img src="{% avatar_url profile_user 354 %}" alt="" height="177" width="177" class="img-circle" />
                                </a>
                                {% ifequal request.user profile_user %}{% else %}
                                    <a class="btn btn-danger" href="{% url 'actstream_unfollow' content_type_id=user_content_type.pk object_id=profile_user.pk %}" id="unfollow_button" {% if not request.user|is_following:profile_user %} style="display:none"{% endif %}>Unfollow</a>
                                    <a class="btn btn-success" href="{% url 'actstream_follow' content_type_id=user_content_type.pk object_id=profile_user.pk %}" id="follow_button" {% if request.user|is_following:profile_user %} style="display:none"{% endif %}>Follow</a>
                                {% endifequal %}
                                <div class="user-details">
                                    <h1>
                                        <a data-url="{% url 'profiles-activity' profile_user.username %}" href="#activity" class="tab-link">{{ profile_user.username }}</a>
                                    </h1>
                                    {% if profile_user.get_profile %}
                                        <h2>
                                            {{ profile_user.get_profile.profile_details }}
                                            {% if profile_user.get_profile.location %}<i>&bull;</i>{{ profile_user.get_profile.location }}{% endif %}
                                        </h2>
                                        <ul class="nav nav-tabs clearfix">
                                            <li class="home{% if not is_share %} active{% endif %}">
                                                <a data-url="{% url 'profiles-activity' profile_user.username %}" href="#activity" class="tab-link"></a>
                                            </li>
                                            <li class="followers">
                                                <a data-url="{% url 'profiles-followers' profile_user.username %}" href="#followers" class="tab-link">
                                                    <em>{{ profile_followers|length }}</em>
                                                    <br>
                                                    Fan{{ profile_followers|length|pluralize }}
                                                </a>
                                            </li>
                                            <li class="following">
                                                <a data-url="{% url 'profiles-following' profile_user.username %}" href="#following" class="tab-link">
                                                    <em>{{ profile_following|length }}</em>
                                                    <br>
                                                    Aficionado{{ profile_following|length|pluralize }}
                                                </a>
                                            </li>
                                            <li class="videos">
                                                <a data-url="{% url 'profiles-videos' profile_user.username %}" href="#videos" class="tab-link">
                                                    <em>{{ profile_videos|length }}</em>
                                                    <br>
                                                    Video{{ profile_videos|length|pluralize }}
                                                </a>
                                            </li>
                                            <li class="conversations">
                                                <a data-url="{% url 'profiles-conversations' profile_user.username %}" href="#conversations" class="tab-link">
                                                    <em>{{ profile_conversations|length }}</em>
                                                    <br>
                                                    Comment{{ profile_conversations|length|pluralize }}
                                                </a>
                                            </li>
                                            <li class="favorites">
                                                <a data-url="{% url 'profiles-favorites' profile_user.username %}" href="#favorites" class="tab-link">
                                                    <em>{{ profile_favorites|length }}</em>
                                                    <br>
                                                    Favorite{{ profile_favorites|length|pluralize }}
                                                </a>
                                            </li>
                                        </ul>
                                        {% if profile_user.get_profile.bio %}
                                            <p class="bio"><span class="corner"></span>&ldquo;{{ profile_user.get_profile.bio }}&rdquo;</p>
                                        {% endif %}
                                    {% endif %}
                                </div>
                            </div>
                            {% ifequal request.user profile_user %}
                                <a data-target="#add-framebuzz-modal" role="button" class="modal-button add-video" data-toggle="modal" class="add-video" title="Add FrameBuzz Video" href="{% url 'profiles-add-video' profile_user %}"><i class="icon-plus"></i></a>
                            {% endifequal %}
                        </nav>
                        <div class="tab-content span7">
                            <nav>
                                <ul class="nav nav-tabs nav-pills clearfix">
                                    <li class="start {% if not is_share %} active{% endif %}">
                                        <a class="tab-link" href="#activity" data-url="{% url 'profiles-activity' profile_user.username %}">Activity</a>
                                    </li>
                                    <li class="followers">
                                        <a data-url="{% url 'profiles-followers' profile_user.username %}" href="#followers" class="tab-link">
                                            Fans
                                        </a>
                                    </li>
                                    <li class="following">
                                        <a data-url="{% url 'profiles-following' profile_user.username %}" href="#following" class="tab-link">
                                            Aficionados
                                        </a>
                                    </li>
                                    <li class="videos">
                                        <a data-url="{% url 'profiles-videos' profile_user.username %}" href="#videos" class="tab-link">
                                            Videos
                                        </a>
                                    </li>
                                    <li class="conversations">
                                        <a data-url="{% url 'profiles-conversations' profile_user.username %}" href="#conversations" class="tab-link">
                                            Comments
                                        </a>
                                    </li>
                                    <li class="favorites">
                                        <a data-url="{% url 'profiles-favorites' profile_user.username %}" href="#favorites" class="tab-link">
                                            Favorites
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                            <div class="tab-pane{% if not is_share %} active{% endif %}" id="activity"></div>
                            <div class="tab-pane" id="myfeed"></div>
                            <div class="tab-pane" id="mysettings"></div>
                            <div class="tab-pane" id="followers"></div>
                            <div class="tab-pane" id="following"></div>
                            <div class="tab-pane" id="conversations"></div>
                            <div class="tab-pane" id="favorites"></div>
                            <div class="tab-pane" id="videos"></div>
                            <div class="tab-pane" id="edit"></div>
                            <div class="tab-pane" id="avatar"></div>
                            {% block share_content %}{% endblock %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="video-embed-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-body">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <iframe src="" scrolling="no" frameBorder="0" height="398" width="640"></iframe>
        </div>
    </div>
    <div id="add-framebuzz-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-header">
            Create Your Own FrameBuzz
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        </div>
        <div class="modal-body"></div>
    </div>
{% endblock %}

{% block page_javascript %}
    {% compress js %}
        <script src="{% static 'framebuzz/profiles/js/jquery.fileupload.js' %}"></script>
        <script src="{% static 'framebuzz/profiles/js/masonry.pkgd.min.js' %}"></script>
        <script src="{% static 'framebuzz/profiles/js/imagesloaded.pkgd.min.js' %}"></script>
        <script src="{% static 'framebuzz/profiles/js/classie.js' %}"></script>
        <script src="{% static 'framebuzz/profiles/js/AnimOnScroll.js' %}"></script>
        <script src="{% static 'framebuzz/profiles/js/jquery.lazyload.js' %}"></script>
        <script src="{% static 'framebuzz/marketing/js/jquery.anystretch.min.js' %}"></script>
        <script src="{% static 'framebuzz/profiles/js/blur.js' %}"></script>
        <script src="{% static 'framebuzz/profiles/js/framebuzz.profiles.js' %}"></script>
        <script type="text/javascript">
            $(function(){
                //$('div.marketing-content').anystretch("{% static 'framebuzz/profiles/img/elixir.jpg' %}", {speed: 150, positionY: 0});
                FrameBuzzProfile.init();
            });
            </script>
    {% endcompress %}
    {% block extra_javascript %}{% endblock %}
{% endblock %}