<div class="comments-view">
    <div class="threads-timeline sibling-threads" data-ng-hide="selectedThread == null">
        <img class="bkg" data-ng-src="{{ rootPath }}img/bkg-heads.png" alt="" />
        <ul class="clearfix">            
            <li data-ng-repeat="siblingThread in selectedThreadSiblings" data-ng-class="{ 'active': siblingThread.id == selectedThread.id }">
                <img data-ng-src="{{ siblingThread.user.avatar_url }}" class="img-circle" data-ng-hide="siblingThread.user.avatar_url == NULL" data-ng-click="setSelectedThread(siblingThread)">
                <img data-ng-src="{{ rootPath }}img/blank.png" class="img-circle" data-ng-show="siblingThread.user.avatar_url == NULL">
            </li>
        </ul>
    </div>
    <div class="thread-scroll single-thread" data-ng-hide="selectedThread == null" data-scrollbar="true">
        <ul class="comment-stream">
            <li>
                <div class="thread">
                    <div class="header">
                        <a class="username" data-ng-href="getUserProfile(selectedThread.user.username)">{{ selectedThread.user.username }}</a>
                        <strong class="time">{{ selectedThread.time_hms }}</strong>
                    </div>
                    <p>{{ selectedThread.comment }}</p>
                </div>
                <img class="img-circle" data-ng-src="{{ selectedThread.user.avatar_url }}" alt="" data-ng-click="getUserProfile(selectedThread.user.username)" />
                <div class="comment-actions clearfix">
                    <a class="reply" data-ng-model="replyClicked" data-ng-init="replyClicked = false" data-ng-click="replyClicked = !replyClicked" title="Reply" data-ng-show="videoInstance.is_authenticated">
                        <img data-ng-src="{{ rootPath }}img/icon-post-comment.png" alt="Reply" data-ng-hide="replyClicked" />
                        <img data-ng-src="{{ rootPath }}img/icon-post-comment-on.png" alt="Reply" data-ng-show="replyClicked" />
                    </a>
                    <a class="favorite" data-ng-click="postCommentAction(selectedThread, 'favorite')" title="Favorite" data-ng-show="videoInstance.is_authenticated">
                        <img data-ng-src="{{ rootPath }}img/icon-favorite.png" alt="Favorite" data-ng-hide="selectedThread.is_favorite" />
                        <img data-ng-src="{{ rootPath }}img/icon-favorite-on.png" alt="Favorite" data-ng-show="selectedThread.is_favorite" />
                    </a>
                    <a class="follow" data-ng-click="postCommentAction(selectedThread, 'follow')" title="Follow" data-ng-show="videoInstance.is_authenticated">
                        <img data-ng-src="{{ rootPath }}img/icon-follow.png" alt="Follow" data-ng-hide="selectedThread.is_following" />
                        <img data-ng-src="{{ rootPath }}img/icon-follow-on.png" alt="Follow" data-ng-show="selectedThread.is_following" />
                    </a>
                    <span class="dots" data-ng-show="selectedThread.has_hidden_siblings" class="dots has-hidden-siblings">
                      <img data-ng-src="/static/framebuzz/player/app/img/icon-dots.png" alt="View More"  />
                    </span>
                    <span class="dots" data-ng-show="selectedThread.has_replies && !selectedThread.has_hidden_siblings" class="dots has-replies">
                      <img data-ng-src="/static/framebuzz/player/app/img/icon-dots.png" alt="View More"  />
                    </span>
                    <a class="flag" data-ng-click="postCommentAction(selectedThread, 'flag')" title="Flag" data-ng-show="videoInstance.is_authenticated">
                        <img data-ng-src="{{ rootPath }}img/icon-flag.png" alt="Flag" data-ng-hide="selectedThread.is_flagged" />
                        <img data-ng-src="{{ rootPath }}img/icon-flag-on.png" alt="Flag" data-ng-show="selectedThread.is_flagged" />
                    </a>
                </div>
                <ul class="replies">
                    <li data-ng-repeat="reply in selectedThread.replies">
                        <div class="thread">
                            <div class="header">
                                <strong class="username">{{ reply.user.username }}</strong>
                            </div>
                            <p>{{ reply.comment }}</p>
                        </div>
                    </li>
                </ul>
                <div class="post-reply" data-ng-show="videoInstance.is_authenticated && replyClicked">
                    <form method="post" action="" id="post-reply-form" class="span12" data-ng-submit="postNewReply()">
                        <p style="display:none;"><input type="text" id="id_honeypot" name="honeypot" data-ng-model="newReply.honeypot"></p>
                        <input data-maxinput="" data-ng-model="newReply.comment" type="text" id="id_reply" name="reply" maxlength="180" placeholder="Reply to this comment..."  />
                        <input type="submit" data-ng-show="false" />
                    </form>
                </div>
            </li>
        </ul>
    </div>
</div>