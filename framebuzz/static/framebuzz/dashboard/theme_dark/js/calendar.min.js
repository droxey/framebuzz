!function(e,t){function i(t){e.extend(!0,ft,t)}function n(i,n,c){function u(e){at?g()&&(C(),_(e)):d()}function d(){st=n.theme?"ui":"fc",i.addClass("fc"),n.isRTL?i.addClass("fc-rtl"):i.addClass("fc-ltr"),n.theme&&i.addClass("ui-widget"),at=e("<div class='fc-content' style='position:relative'/>").prependTo(i),it=new a(tt,n),nt=it.render(),nt&&i.prepend(nt),y(n.defaultView),n.handleWindowResize&&e(window).resize(S),v()||p()}function p(){setTimeout(function(){!ot.start&&v()&&A()},0)}function f(){ot&&(et("viewDestroy",ot,ot,ot.element),ot.triggerEventDestroy()),e(window).unbind("resize",S),it.destroy(),at.remove(),i.removeClass("fc fc-rtl ui-widget")}function g(){return i.is(":visible")}function v(){return e("body").is(":visible")}function y(e){ot&&e==ot.name||x(e)}function x(t){ft++,ot&&(et("viewDestroy",ot,ot,ot.element),F(),ot.triggerEventDestroy(),K(),ot.element.remove(),it.deactivateButton(ot.name)),it.activateButton(t),ot=new vt[t](e("<div class='fc-view block fc-view-"+t+"' style='position:relative'/>").appendTo(at),tt),A(),Q(),ft--}function A(e){(!ot.start||e||mt<ot.start||mt>=ot.end)&&g()&&_(e)}function _(e){ft++,ot.start&&(et("viewDestroy",ot,ot,ot.element),F(),I()),K(),ot.render(mt,e||0),T(),Q(),(ot.afterRender||N)(),j(),R(),et("viewRender",ot,ot,ot.element),ot.trigger("viewDisplay",ht),ft--,M()}function k(){g()&&(F(),I(),C(),T(),D())}function C(){lt=n.contentHeight?n.contentHeight:n.height?n.height-(nt?nt.height():0)-P(at):Math.round(at.width()/Math.max(n.aspectRatio,.5))}function T(){lt===t&&C(),ft++,ot.setHeight(lt),ot.setWidth(at.width()),ft--,rt=i.outerWidth()}function S(){if(!ft)if(ot.start){var e=++pt;setTimeout(function(){e==pt&&!ft&&g()&&rt!=(rt=i.outerWidth())&&(ft++,k(),ot.trigger("windowResize",ht),ft--)},200)}else p()}function E(){I(),O()}function $(e){I(),D(e)}function D(e){g()&&(ot.setEventData(gt),ot.renderEvents(gt,e),ot.trigger("eventAfterAllRender"))}function I(){ot.triggerEventDestroy(),ot.clearEvents(),ot.clearEventData()}function M(){!n.lazyFetching||ut(ot.visStart,ot.visEnd)?O():D()}function O(){dt(ot.visStart,ot.visEnd)}function L(e){gt=e,D()}function z(e){$(e)}function j(){it.updateTitle(ot.title)}function R(){var e=new Date;e>=ot.start&&e<ot.end?it.disableButton("today"):it.enableButton("today")}function B(e,i,n){ot.select(e,i,n===t?!0:n)}function F(){ot&&ot.unselect()}function H(){A(-1)}function q(){A(1)}function W(){o(mt,-1),A()}function U(){o(mt,1),A()}function V(){mt=new Date,A()}function G(e,t,i){e instanceof Date?mt=h(e):m(mt,e,t,i),A()}function Y(e,i,n){e!==t&&o(mt,e),i!==t&&r(mt,i),n!==t&&l(mt,n),A()}function X(){return h(mt)}function K(){at.css({width:"100%",height:at.height(),overflow:"hidden"})}function Q(){at.css({width:"",height:"",overflow:""})}function J(){return ot}function Z(e,i){return i===t?n[e]:(("height"==e||"contentHeight"==e||"aspectRatio"==e)&&(n[e]=i,k()),void 0)}function et(e,t){return n[e]?n[e].apply(t||ht,Array.prototype.slice.call(arguments,2)):void 0}var tt=this;tt.options=n,tt.render=u,tt.destroy=f,tt.refetchEvents=E,tt.reportEvents=L,tt.reportEventChange=z,tt.rerenderEvents=$,tt.changeView=y,tt.select=B,tt.unselect=F,tt.prev=H,tt.next=q,tt.prevYear=W,tt.nextYear=U,tt.today=V,tt.gotoDate=G,tt.incrementDate=Y,tt.formatDate=function(e,t){return b(e,t,n)},tt.formatDates=function(e,t,i){return w(e,t,i,n)},tt.getDate=X,tt.getView=J,tt.option=Z,tt.trigger=et,s.call(tt,n,c);var it,nt,at,st,ot,rt,lt,ct,ut=tt.isFetchNeeded,dt=tt.fetchEvents,ht=i[0],pt=0,ft=0,mt=new Date,gt=[];m(mt,n.year,n.month,n.date),n.droppable&&e(document).bind("dragstart",function(t,i){var a=t.target,s=e(a);if(!s.parents(".fc").length){var o=n.dropAccept;(e.isFunction(o)?o.call(a,s):s.is(o))&&(ct=a,ot.dragStart(ct,t,i))}}).bind("dragstop",function(e,t){ct&&(ot.dragStop(ct,e,t),ct=null)})}function a(t,i){function n(){h=i.theme?"ui":"fc";var t=i.header;return t?p=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(s("left")).append(s("center")).append(s("right"))):void 0}function a(){p.remove()}function s(n){var a=e("<td class='fc-header-"+n+"'/>"),s=i.header[n];return s&&e.each(s.split(" "),function(n){n>0&&a.append("<span class='fc-header-space'/>");var s;e.each(this.split(","),function(n,o){if("title"==o)a.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),s&&s.addClass(h+"-corner-right"),s=null;else{var r;if(t[o]?r=t[o]:vt[o]&&(r=function(){u.removeClass(h+"-state-hover"),t.changeView(o)}),r){var l=i.theme?R(i.buttonIcons,o):null,c=R(i.buttonText,o),u=e("<span class='fc-button btn btn-sm btn-gr-gray fc-button-"+o+" "+h+"-state-default'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/>"+"</span>":c)+"</span>").click(function(){u.hasClass(h+"-state-disabled")||r()}).mousedown(function(){u.not("."+h+"-state-active").not("."+h+"-state-disabled").addClass(h+"-state-down")}).mouseup(function(){u.removeClass(h+"-state-down")}).hover(function(){u.not("."+h+"-state-active").not("."+h+"-state-disabled").addClass(h+"-state-hover")},function(){u.removeClass(h+"-state-hover").removeClass(h+"-state-down")}).appendTo(a);F(u),s||u.addClass(h+"-corner-left"),s=u}}}),s&&s.addClass(h+"-corner-right")}),a}function o(e){p.find("h2").html(e)}function r(e){p.find("span.fc-button-"+e).addClass(h+"-state-active")}function l(e){p.find("span.fc-button-"+e).removeClass(h+"-state-active")}function c(e){p.find("span.fc-button-"+e).addClass(h+"-state-disabled")}function u(e){p.find("span.fc-button-"+e).removeClass(h+"-state-disabled")}var d=this;d.render=n,d.destroy=a,d.updateTitle=o,d.activateButton=r,d.deactivateButton=l,d.disableButton=c,d.enableButton=u;var h,p=e([])}function s(i,n){function a(e,t){return!k||k>e||t>C}function s(e,t){k=e,C=t,O=[];var i=++P,n=D.length;I=n;for(var a=0;n>a;a++)o(D[a],i)}function o(t,n){r(t,function(a){if(n==P){if(a){i.eventDataTransform&&(a=e.map(a,i.eventDataTransform)),t.eventDataTransform&&(a=e.map(a,t.eventDataTransform));for(var s=0;s<a.length;s++)a[s].source=t,b(a[s]);O=O.concat(a)}I--,I||E(O)}})}function r(t,n){var a,s,o=gt.sourceFetchers;for(a=0;a<o.length;a++){if(s=o[a](t,k,C,n),s===!0)return;if("object"==typeof s)return r(s,n),void 0}var l=t.events;if(l)e.isFunction(l)?(v(),l(h(k),h(C),function(e){n(e),y()})):e.isArray(l)?n(l):n();else{var c=t.url;if(c){var u,d=t.success,p=t.error,f=t.complete;u=e.isFunction(t.data)?t.data():t.data;var m=e.extend({},u||{}),g=U(t.startParam,i.startParam),b=U(t.endParam,i.endParam);g&&(m[g]=Math.round(+k/1e3)),b&&(m[b]=Math.round(+C/1e3)),v(),e.ajax(e.extend({},yt,t,{data:m,success:function(t){t=t||[];var i=W(d,this,arguments);e.isArray(i)&&(t=i),n(t)},error:function(){W(p,this,arguments),n()},complete:function(){W(f,this,arguments),y()}}))}else n()}}function l(e){e=c(e),e&&(I++,o(e,P))}function c(t){return e.isFunction(t)||e.isArray(t)?t={events:t}:"string"==typeof t&&(t={url:t}),"object"==typeof t?(w(t),D.push(t),t):void 0}function u(t){D=e.grep(D,function(e){return!x(e,t)}),O=e.grep(O,function(e){return!x(e.source,t)}),E(O)}function d(e){var t,i,n=O.length,a=S().defaultEventEnd,s=e.start-e._start,o=e.end?e.end-(e._end||a(e)):0;for(t=0;n>t;t++)i=O[t],i._id==e._id&&i!=e&&(i.start=new Date(+i.start+s),i.end=e.end?i.end?new Date(+i.end+o):new Date(+a(i)+o):null,i.title=e.title,i.url=e.url,i.allDay=e.allDay,i.className=e.className,i.editable=e.editable,i.color=e.color,i.backgroundColor=e.backgroundColor,i.borderColor=e.borderColor,i.textColor=e.textColor,b(i));b(e),E(O)}function p(e,t){b(e),e.source||(t&&($.events.push(e),e.source=$),O.push(e)),E(O)}function f(t){if(t){if(!e.isFunction(t)){var i=t+"";t=function(e){return e._id==i}}O=e.grep(O,t,!0);for(var n=0;n<D.length;n++)e.isArray(D[n].events)&&(D[n].events=e.grep(D[n].events,t,!0))}else{O=[];for(var n=0;n<D.length;n++)e.isArray(D[n].events)&&(D[n].events=[])}E(O)}function m(t){return e.isFunction(t)?e.grep(O,t):t?(t+="",e.grep(O,function(e){return e._id==t})):O}function v(){M++||T("loading",null,!0)}function y(){--M||T("loading",null,!1)}function b(e){var n=e.source||{},a=U(n.ignoreTimezone,i.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+bt++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=h(e.start=g(e.start,a)),e.end=g(e.end,a),e.end&&e.end<=e.start&&(e.end=null),e._end=e.end?h(e.end):null,e.allDay===t&&(e.allDay=U(n.allDayDefault,i.allDayDefault)),e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[]}function w(e){e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=gt.sourceNormalizers,i=0;i<t.length;i++)t[i](e)}function x(e,t){return e&&t&&A(e)==A(t)}function A(e){return("object"==typeof e?e.events||e.url:"")||e}var _=this;_.isFetchNeeded=a,_.fetchEvents=s,_.addEventSource=l,_.removeEventSource=u,_.updateEvent=d,_.renderEvent=p,_.removeEvents=f,_.clientEvents=m,_.normalizeEvent=b;for(var k,C,T=_.trigger,S=_.getView,E=_.reportEvents,$={events:[]},D=[$],P=0,I=0,M=0,O=[],N=0;N<n.length;N++)c(n[N])}function o(e,t,i){return e.setFullYear(e.getFullYear()+t),i||d(e),e}function r(e,t,i){if(+e){var n=e.getMonth()+t,a=h(e);for(a.setDate(1),a.setMonth(n),e.setMonth(n),i||d(e);e.getMonth()!=a.getMonth();)e.setDate(e.getDate()+(a>e?1:-1))}return e}function l(e,t,i){if(+e){var n=e.getDate()+t,a=h(e);a.setHours(9),a.setDate(n),e.setDate(n),i||d(e),c(e,a)}return e}function c(e,t){if(+e)for(;e.getDate()!=t.getDate();)e.setTime(+e+(t>e?1:-1)*At)}function u(e,t){return e.setMinutes(e.getMinutes()+t),e}function d(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function h(e,t){return t?d(new Date(+e)):new Date(+e)}function p(){var e,t=0;do e=new Date(1970,t++,1);while(e.getHours());return e}function f(e,t){return Math.round((h(e,!0)-h(t,!0))/xt)}function m(e,i,n,a){i!==t&&i!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(i)),n!==t&&n!=e.getMonth()&&(e.setDate(1),e.setMonth(n)),a!==t&&e.setDate(a)}function g(e,i){return"object"==typeof e?e:"number"==typeof e?new Date(1e3*e):"string"==typeof e?e.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(e)):(i===t&&(i=!0),v(e,i)||(e?new Date(e):null)):null}function v(e,t){var i=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!i)return null;var n=new Date(i[1],0,1);if(t||!i[13]){var a=new Date(i[1],0,1,9,0);i[3]&&(n.setMonth(i[3]-1),a.setMonth(i[3]-1)),i[5]&&(n.setDate(i[5]),a.setDate(i[5])),c(n,a),i[7]&&n.setHours(i[7]),i[8]&&n.setMinutes(i[8]),i[10]&&n.setSeconds(i[10]),i[12]&&n.setMilliseconds(1e3*Number("0."+i[12])),c(n,a)}else if(n.setUTCFullYear(i[1],i[3]?i[3]-1:0,i[5]||1),n.setUTCHours(i[7]||0,i[8]||0,i[10]||0,i[12]?1e3*Number("0."+i[12]):0),i[14]){var s=60*Number(i[16])+(i[18]?Number(i[18]):0);s*="-"==i[15]?1:-1,n=new Date(+n+1e3*60*s)}return n}function y(e){if("number"==typeof e)return 60*e;if("object"==typeof e)return 60*e.getHours()+e.getMinutes();var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var i=parseInt(t[1],10);return t[3]&&(i%=12,"p"==t[3].toLowerCase().charAt(0)&&(i+=12)),60*i+(t[2]?parseInt(t[2],10):0)}}function b(e,t,i){return w(e,null,t,i)}function w(e,t,i,n){n=n||ft;var a,s,o,r,l=e,c=t,u=i.length,d="";for(a=0;u>a;a++)if(s=i.charAt(a),"'"==s){for(o=a+1;u>o;o++)if("'"==i.charAt(o)){l&&(d+=o==a+1?"'":i.substring(a+1,o),a=o);break}}else if("("==s){for(o=a+1;u>o;o++)if(")"==i.charAt(o)){var h=b(l,i.substring(a+1,o),n);parseInt(h.replace(/\D/,""),10)&&(d+=h),a=o;break}}else if("["==s){for(o=a+1;u>o;o++)if("]"==i.charAt(o)){var p=i.substring(a+1,o),h=b(l,p,n);h!=b(c,p,n)&&(d+=h),a=o;break}}else if("{"==s)l=t,c=e;else if("}"==s)l=e,c=t;else{for(o=u;o>a;o--)if(r=kt[i.substring(a,o)]){l&&(d+=r(l,n)),a=o-1;break}o==a&&l&&(d+=s)}return d}function x(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1}function A(e){return e.end?_(e.end,e.allDay):l(h(e.start),1)}function _(e,t){return e=h(e),t||e.getHours()||e.getMinutes()?l(e,1):d(e)}function k(i,n,a){i.unbind("mouseover").mouseover(function(i){for(var s,o,r,l=i.target;l!=this;)s=l,l=l.parentNode;(o=s._fci)!==t&&(s._fci=t,r=n[o],a(r.event,r.element,r),e(i.target).trigger(i)),i.stopPropagation()})}function C(t,i,n){for(var a,s=0;s<t.length;s++)a=e(t[s]),a.width(Math.max(0,i-S(a,n)))}function T(t,i,n){for(var a,s=0;s<t.length;s++)a=e(t[s]),a.height(Math.max(0,i-P(a,n)))}function S(e,t){return E(e)+D(e)+(t?$(e):0)}function E(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}function $(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}function D(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}function P(e,t){return I(e)+O(e)+(t?M(e):0)}function I(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}function M(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}function O(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}function N(){}function L(e,t){return e-t}function z(e){return Math.max.apply(Math,e)}function j(e){return(10>e?"0":"")+e}function R(e,i){if(e[i]!==t)return e[i];for(var n,a=i.split(/(?=[A-Z])/),s=a.length-1;s>=0;s--)if(n=e[a[s].toLowerCase()],n!==t)return n;return e[""]}function B(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function F(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function H(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function q(e,t){var i=e.source||{},n=e.color,a=i.color,s=t("eventColor"),o=e.backgroundColor||n||i.backgroundColor||a||t("eventBackgroundColor")||s,r=e.borderColor||n||i.borderColor||a||t("eventBorderColor")||s,l=e.textColor||i.textColor||t("eventTextColor"),c=[];return o&&c.push("background-color:"+o),r&&c.push("border-color:"+r),l&&c.push("color:"+l),c.join(";")}function W(t,i,n){if(e.isFunction(t)&&(t=[t]),t){var a,s;for(a=0;a<t.length;a++)s=t[a].apply(i,n)||s;return s}}function U(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==t)return arguments[e]}function V(e,t){function i(e,t){t&&(r(e,t),e.setDate(1));var i=a("firstDay"),d=h(e,!0);d.setDate(1);var p=r(h(d),1),m=h(d);l(m,-((m.getDay()-i+7)%7)),o(m);var g=h(p);l(g,(7-g.getDay()+i)%7),o(g,-1,!0);var v=c(),y=Math.round(f(g,m)/7);"fixed"==a("weekMode")&&(l(g,7*(6-y)),y=6),n.title=u(d,a("titleFormat")),n.start=d,n.end=p,n.visStart=m,n.visEnd=g,s(y,v,!0)}var n=this;n.render=i,X.call(n,e,t,"month");var a=n.opt,s=n.renderBasic,o=n.skipHiddenDays,c=n.getCellsPerWeek,u=t.formatDate}function G(e,t){function i(e,t){t&&l(e,7*t);var i=l(h(e),-((e.getDay()-a("firstDay")+7)%7)),u=l(h(i),7),d=h(i);o(d);var p=h(u);o(p,-1,!0);var f=r();n.start=i,n.end=u,n.visStart=d,n.visEnd=p,n.title=c(d,l(h(p),-1),a("titleFormat")),s(1,f,!1)}var n=this;n.render=i,X.call(n,e,t,"basicWeek");var a=n.opt,s=n.renderBasic,o=n.skipHiddenDays,r=n.getCellsPerWeek,c=t.formatDates}function Y(e,t){function i(e,t){t&&l(e,t),o(e,0>t?-1:1);var i=h(e,!0),c=l(h(i),1);n.title=r(e,a("titleFormat")),n.start=n.visStart=i,n.end=n.visEnd=c,s(1,1,!1)}var n=this;n.render=i,X.call(n,e,t,"basicDay");var a=n.opt,s=n.renderBasic,o=n.skipHiddenDays,r=t.formatDate}function X(t,i,n){function a(e,t,i){tt=e,it=t,nt=i,s(),q||o(),r()}function s(){ft=bt("theme")?"ui":"fc",mt=bt("columnFormat"),gt=bt("weekNumbers"),vt=bt("weekNumberTitle"),yt="iso"!=bt("weekNumberCalculation")?"w":"W"}function o(){X=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function r(){var i=c();z&&z.remove(),z=e(i).appendTo(t),j=z.find("thead"),R=j.find(".fc-day-header"),q=z.find("tbody"),W=q.find("tr"),U=q.find(".fc-day"),V=W.find("td:first-child"),G=W.eq(0).find(".fc-day > div"),Y=W.eq(0).find(".fc-day-content > div"),H(j.add(j.find("tr"))),H(W),W.eq(0).addClass("fc-first"),W.filter(":last").addClass("fc-last"),U.each(function(t,i){var n=Ct(Math.floor(t/it),t%it);xt("dayRender",L,n,e(i))}),y(U)}function c(){var e="<table class='fc-border-separate' cellspacing='0'>"+u()+p()+"</table>";return e}function u(){var e,t,i=ft+"-widget-header",n="";for(n+="<thead><tr>",gt&&(n+="<th class='fc-week-number "+i+"'>"+B(vt)+"</th>"),e=0;it>e;e++)t=Ct(0,e),n+="<th class='fc-day-header fc-"+wt[t.getDay()]+" "+i+"'>"+B(Et(t,mt))+"</th>";return n+="</tr></thead>"}function p(){var e,t,i,n=ft+"-widget-content",a="";for(a+="<tbody>",e=0;tt>e;e++){for(a+="<tr class='fc-week'>",gt&&(i=Ct(e,0),a+="<td class='fc-week-number "+n+"'>"+"<div>"+B(Et(i,yt))+"</div>"+"</td>"),t=0;it>t;t++)i=Ct(e,t),a+=f(i);a+="</tr>"}return a+="</tbody>"}function f(e){var t=ft+"-widget-content",i=L.start.getMonth(),n=d(new Date),a="",s=["fc-day","fc-"+wt[e.getDay()],t];return e.getMonth()!=i&&s.push("fc-other-month"),+e==+n?s.push("fc-today",ft+"-state-highlight"):n>e?s.push("fc-past"):s.push("fc-future"),a+="<td class='"+s.join(" ")+"'"+" data-date='"+Et(e,"yyyy-MM-dd")+"'"+">"+"<div>",nt&&(a+="<div class='fc-day-number'>"+e.getDate()+"</div>"),a+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function m(t){J=t;var i,n,a,s=J-j.height();"variable"==bt("weekMode")?i=n=Math.floor(s/(1==tt?2:6)):(i=Math.floor(s/tt),n=s-i*(tt-1)),V.each(function(t,s){tt>t&&(a=e(s),a.find("> div").css("min-height",(t==tt-1?n:i)-P(a)))})}function g(e){Q=e,rt.clear(),ht.clear(),et=0,gt&&(et=j.find("th.fc-week-number").outerWidth()),Z=Math.floor((Q-et)/it),C(R.slice(0,-1),Z)}function y(e){e.click(b).mousedown(kt)}function b(t){if(!bt("selectable")){var i=v(e(this).data("date"));xt("dayClick",this,i,!0,t)}}function w(e,t,i){i&&st.build();for(var n=St(e,t),a=0;a<n.length;a++){var s=n[a];y(x(s.row,s.leftCol,s.row,s.rightCol))}}function x(e,i,n,a){var s=st.rect(e,i,n,a,t);return At(s,t)}function A(e){return h(e)}function _(e,t){w(e,l(h(t),1),!0)}function k(){_t()}function T(e,t,i){var n=Tt(e),a=U[n.row*it+n.col];xt("dayClick",a,e,t,i)}function S(e,t){ot.start(function(e){_t(),e&&x(e.row,e.col,e.row,e.col)},t)}function E(e,t,i){var n=ot.stop();if(_t(),n){var a=Ct(n);xt("drop",e,a,!0,t,i)}}function $(e){return h(e.start)}function D(e){return rt.left(e)}function I(e){return rt.right(e)}function M(e){return ht.left(e)}function O(e){return ht.right(e)}function N(e){return W.eq(e)}var L=this;L.renderBasic=a,L.setHeight=m,L.setWidth=g,L.renderDayOverlay=w,L.defaultSelectionEnd=A,L.renderSelection=_,L.clearSelection=k,L.reportDayClick=T,L.dragStart=S,L.dragStop=E,L.defaultEventEnd=$,L.getHoverListener=function(){return ot},L.colLeft=D,L.colRight=I,L.colContentLeft=M,L.colContentRight=O,L.getIsCellAllDay=function(){return!0},L.allDayRow=N,L.getRowCnt=function(){return tt},L.getColCnt=function(){return it},L.getColWidth=function(){return Z},L.getDaySegmentContainer=function(){return X},at.call(L,t,i,n),ct.call(L),lt.call(L),K.call(L);var z,j,R,q,W,U,V,G,Y,X,Q,J,Z,et,tt,it,nt,st,ot,rt,ht,ft,mt,gt,vt,yt,bt=L.opt,xt=L.trigger,At=L.renderOverlay,_t=L.clearOverlays,kt=L.daySelectionMousedown,Ct=L.cellToDate,Tt=L.dateToCell,St=L.rangeToSegments,Et=i.formatDate;F(t.addClass("fc-grid")),st=new ut(function(t,i){var n,a,s;R.each(function(t,o){n=e(o),a=n.offset().left,t&&(s[1]=a),s=[a],i[t]=s}),s[1]=a+n.outerWidth(),W.each(function(i,o){tt>i&&(n=e(o),a=n.offset().top,i&&(s[1]=a),s=[a],t[i]=s)}),s[1]=a+n.outerHeight()}),ot=new dt(st),rt=new pt(function(e){return G.eq(e)}),ht=new pt(function(e){return Y.eq(e)})}function K(){function e(e,t){i.renderDayEvents(e,t)}function t(){i.getDaySegmentContainer().empty()}var i=this;i.renderEvents=e,i.clearEvents=t,st.call(i)}function Q(e,t){function i(e,t){t&&l(e,7*t);var i=l(h(e),-((e.getDay()-a("firstDay")+7)%7)),u=l(h(i),7),d=h(i);o(d);var p=h(u);o(p,-1,!0);var f=r();n.title=c(d,l(h(p),-1),a("titleFormat")),n.start=i,n.end=u,n.visStart=d,n.visEnd=p,s(f)}var n=this;n.render=i,Z.call(n,e,t,"agendaWeek");var a=n.opt,s=n.renderAgenda,o=n.skipHiddenDays,r=n.getCellsPerWeek,c=t.formatDates}function J(e,t){function i(e,t){t&&l(e,t),o(e,0>t?-1:1);var i=h(e,!0),c=l(h(i),1);n.title=r(e,a("titleFormat")),n.start=n.visStart=i,n.end=n.visEnd=c,s(1)}var n=this;n.render=i,Z.call(n,e,t,"agendaDay");var a=n.opt,s=n.renderAgenda,o=n.skipHiddenDays,r=t.formatDate}function Z(i,n,a){function s(e){Nt=e,o(),Z?c():r()}function o(){Ft=Xt("theme")?"ui":"fc",Ht=Xt("isRTL"),qt=y(Xt("minTime")),Wt=y(Xt("maxTime")),Ut=Xt("columnFormat"),Vt=Xt("weekNumbers"),Gt=Xt("weekNumberTitle"),Yt="iso"!=Xt("weekNumberCalculation")?"w":"W",It=Xt("snapMinutes")||Xt("slotMinutes")}function r(){var t,n,a,s,o,r=Ft+"-widget-header",l=Ft+"-widget-content",d=0==Xt("slotMinutes")%15;for(c(),mt=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(i),Xt("allDaySlot")?(gt=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(mt),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+r+" fc-agenda-axis'>"+Xt("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+r+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",vt=e(t).appendTo(mt),yt=vt.find("tr"),A(yt.find("td")),mt.append("<div class='fc-agenda-divider "+r+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):gt=e([]),bt=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(mt),xt=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(bt),At=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(xt),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",n=p(),s=u(h(n),Wt),u(n,qt),Lt=0,a=0;s>n;a++)o=n.getMinutes(),t+="<tr class='fc-slot"+a+" "+(o?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+r+"'>"+(d&&o?"&nbsp;":oi(n,Xt("axisFormat")))+"</th>"+"<td class='"+l+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",u(n,Xt("slotMinutes")),Lt++;t+="</tbody></table>",_t=e(t).appendTo(xt),kt=_t.find("div:first"),_(_t.find("td"))}function c(){var t=f();Z&&Z.remove(),Z=e(t).appendTo(i),tt=Z.find("thead"),it=tt.find("th").slice(1,-1),nt=Z.find("tbody"),st=nt.find("td").slice(0,-1),ot=st.find("> div"),rt=st.find(".fc-day-content > div"),ht=st.eq(0),ft=ot.eq(0),H(tt.add(tt.find("tr"))),H(nt.add(nt.find("tr")))}function f(){var e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+m()+g()+"</table>";return e}function m(){var e,t,i,n=Ft+"-widget-header",a="";for(a+="<thead><tr>",Vt?(t=oi(e,Yt),Ht?t+=Gt:t=Gt+t,a+="<th class='fc-agenda-axis fc-week-number "+n+"'>"+B(t)+"</th>"):a+="<th class='fc-agenda-axis "+n+"'>&nbsp;</th>",i=0;Nt>i;i++)e=ni(0,i),a+="<th class='fc-"+wt[e.getDay()]+" fc-col"+i+" "+n+"'>"+B(oi(e,Ut))+"</th>";return a+="<th class='fc-agenda-gutter "+n+"'>&nbsp;</th>"+"</tr>"+"</thead>"}function g(){var e,t,i,n,a,s=Ft+"-widget-header",o=Ft+"-widget-content",r=d(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+s+"'>&nbsp;</th>",i="",t=0;Nt>t;t++)e=ni(0,t),a=["fc-col"+t,"fc-"+wt[e.getDay()],o],+e==+r?a.push(Ft+"-state-highlight","fc-today"):r>e?a.push("fc-past"):a.push("fc-future"),n="<td class='"+a.join(" ")+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>",i+=n;return l+=i,l+="<td class='fc-agenda-gutter "+o+"'>&nbsp;</td>"+"</tr>"+"</tbody>"}function v(e){e===t&&(e=St),St=e,ri={};var i=nt.position().top,n=bt.position().top,a=Math.min(e-i,_t.height()+n+1);ft.height(a-P(ht)),mt.css("top",i),bt.height(a-n-1),Pt=kt.height()+1,Mt=Xt("slotMinutes")/It,Ot=Pt/Mt}function b(t){Tt=t,Rt.clear(),Bt.clear();var i=tt.find("th:first");vt&&(i=i.add(vt.find("th:first"))),i=i.add(_t.find("th:first")),Et=0,C(i.width("").each(function(t,i){Et=Math.max(Et,e(i).outerWidth())}),Et);var n=Z.find(".fc-agenda-gutter");vt&&(n=n.add(vt.find("th.fc-agenda-gutter")));var a=bt[0].clientWidth;Dt=bt.width()-a,Dt?(C(n,Dt),n.show().prev().removeClass("fc-last")):n.hide().prev().addClass("fc-last"),$t=Math.floor((a-Et)/Nt),C(it.slice(0,-1),$t)}function w(){function e(){bt.scrollTop(n)}var t=p(),i=h(t);i.setHours(Xt("firstHour"));var n=j(t,i)+1;e(),setTimeout(e,0)}function x(){w()}function A(e){e.click(k).mousedown(ti)}function _(e){e.click(k).mousedown(Y)}function k(e){if(!Xt("selectable")){var t=Math.min(Nt-1,Math.floor((e.pageX-Z.offset().left-Et)/$t)),i=ni(0,t),n=this.parentNode.className.match(/fc-slot(\d+)/);if(n){var a=parseInt(n[1])*Xt("slotMinutes"),s=Math.floor(a/60);i.setHours(s),i.setMinutes(a%60+qt),Kt("dayClick",st[t],i,!1,e)}else Kt("dayClick",st[t],i,!0,e)}}function S(e,t,i){i&&zt.build();for(var n=si(e,t),a=0;a<n.length;a++){var s=n[a];A(E(s.row,s.leftCol,s.row,s.rightCol))}}function E(e,t,i,n){var a=zt.rect(e,t,i,n,mt);return Qt(a,mt)}function $(e,t){for(var i=0;Nt>i;i++){var n=ni(0,i),a=l(h(n),1),s=new Date(Math.max(n,e)),o=new Date(Math.min(a,t));if(o>s){var r=zt.rect(0,i,0,i,xt),c=j(n,s),u=j(n,o);r.top=c,r.height=u-c,_(Qt(r,xt))}}}function D(e){return Rt.left(e)}function I(e){return Bt.left(e)}function M(e){return Rt.right(e)}function O(e){return Bt.right(e)}function N(e){return Xt("allDaySlot")&&!e.row}function z(e){var t=ni(0,e.col),i=e.row;return Xt("allDaySlot")&&i--,i>=0&&u(t,qt+i*It),t}function j(e,i){if(e=h(e,!0),i<u(h(e),qt))return 0;if(i>=u(h(e),Wt))return _t.height();var n=Xt("slotMinutes"),a=60*i.getHours()+i.getMinutes()-qt,s=Math.floor(a/n),o=ri[s];return o===t&&(o=ri[s]=_t.find("tr").eq(s).find("td div")[0].offsetTop),Math.max(0,Math.round(o-1+Pt*(a%n/n)))}function R(){return yt}function q(e){var t=h(e.start);return e.allDay?t:u(t,Xt("defaultEventMinutes"))}function W(e,t){return t?h(e):u(h(e),Xt("slotMinutes"))}function U(e,t,i){i?Xt("allDaySlot")&&S(e,l(h(t),1),!0):V(e,t)}function V(t,i){var n=Xt("selectHelper");if(zt.build(),n){var a=ai(t).col;if(a>=0&&Nt>a){var s=zt.rect(0,a,0,a,xt),o=j(t,t),r=j(t,i);if(r>o){if(s.top=o,s.height=r-o,s.left+=2,s.width-=5,e.isFunction(n)){var l=n(t,i);l&&(s.position="absolute",Ct=e(l).css(s).appendTo(xt))}else s.isStart=!0,s.isEnd=!0,Ct=e(ii({title:"",start:t,end:i,className:["fc-select-helper"],editable:!1},s)),Ct.css("opacity",Xt("dragOpacity"));Ct&&(_(Ct),xt.append(Ct),C(Ct,s.width,!0),T(Ct,s.height,!0))}}}else $(t,i)}function G(){Jt(),Ct&&(Ct.remove(),Ct=null)}function Y(t){if(1==t.which&&Xt("selectable")){ei(t);var i;jt.start(function(e,t){if(G(),e&&e.col==t.col&&!N(e)){var n=z(t),a=z(e);i=[n,u(h(n),It),a,u(h(a),It)].sort(L),V(i[0],i[3])}else i=null},t),e(document).one("mouseup",function(e){jt.stop(),i&&(+i[0]==+i[1]&&X(i[0],!1,e),Zt(i[0],i[3],!1,e))})}}function X(e,t,i){Kt("dayClick",st[ai(e).col],e,t,i)}function K(e,t){jt.start(function(e){if(Jt(),e)if(N(e))E(e.row,e.col,e.row,e.col);else{var t=z(e),i=u(h(t),Xt("defaultEventMinutes"));$(t,i)}},t)}function Q(e,t,i){var n=jt.stop();Jt(),n&&Kt("drop",e,z(n),N(n),t,i)}var J=this;J.renderAgenda=s,J.setWidth=b,J.setHeight=v,J.afterRender=x,J.defaultEventEnd=q,J.timePosition=j,J.getIsCellAllDay=N,J.allDayRow=R,J.getCoordinateGrid=function(){return zt},J.getHoverListener=function(){return jt},J.colLeft=D,J.colRight=M,J.colContentLeft=I,J.colContentRight=O,J.getDaySegmentContainer=function(){return gt},J.getSlotSegmentContainer=function(){return At},J.getMinMinute=function(){return qt},J.getMaxMinute=function(){return Wt},J.getSlotContainer=function(){return xt},J.getRowCnt=function(){return 1},J.getColCnt=function(){return Nt},J.getColWidth=function(){return $t},J.getSnapHeight=function(){return Ot},J.getSnapMinutes=function(){return It},J.defaultSelectionEnd=W,J.renderDayOverlay=S,J.renderSelection=U,J.clearSelection=G,J.reportDayClick=X,J.dragStart=K,J.dragStop=Q,at.call(J,i,n,a),ct.call(J),lt.call(J),et.call(J);var Z,tt,it,nt,st,ot,rt,ht,ft,mt,gt,vt,yt,bt,xt,At,_t,kt,Ct,Tt,St,Et,$t,Dt,Pt,It,Mt,Ot,Nt,Lt,zt,jt,Rt,Bt,Ft,Ht,qt,Wt,Ut,Vt,Gt,Yt,Xt=J.opt,Kt=J.trigger,Qt=J.renderOverlay,Jt=J.clearOverlays,Zt=J.reportSelection,ei=J.unselect,ti=J.daySelectionMousedown,ii=J.slotSegHtml,ni=J.cellToDate,ai=J.dateToCell,si=J.rangeToSegments,oi=n.formatDate,ri={};F(i.addClass("fc-agenda")),zt=new ut(function(t,i){function n(e){return Math.max(l,Math.min(c,e))}var a,s,o;it.each(function(t,n){a=e(n),s=a.offset().left,t&&(o[1]=s),o=[s],i[t]=o}),o[1]=s+a.outerWidth(),Xt("allDaySlot")&&(a=yt,s=a.offset().top,t[0]=[s,s+a.outerHeight()]);for(var r=xt.offset().top,l=bt.offset().top,c=l+bt.outerHeight(),u=0;Lt*Mt>u;u++)t.push([n(r+Ot*u),n(r+Ot*(u+1))])}),jt=new dt(zt),Rt=new pt(function(e){return ot.eq(e)}),Bt=new pt(function(e){return rt.eq(e)})}function et(){function i(e,t){var i,n=e.length,s=[],o=[];for(i=0;n>i;i++)e[i].allDay?s.push(e[i]):o.push(e[i]);y("allDaySlot")&&(nt(s,t),E()),r(a(o),t)}function n(){$().empty(),D().empty()}function a(t){var i,n,a,r,l,c,d,p=H(),f=O(),m=M(),g=e.map(t,o),v=[];for(n=0;p>n;n++)for(i=R(0,n),u(i,f),a=tt(s(t,g,i,u(h(i),m-f))),it(a),r=0;r<a.length;r++)for(l=a[r],c=0;c<l.length;c++)d=l[c],d.col=n,d.level=r,v.push(d);return v}function s(e,t,i,n){var a,s,o,r,l,c,u,d,p=[],f=e.length;for(a=0;f>a;a++)s=e[a],o=s.start,r=t[a],r>i&&n>o&&(i>o?(l=h(i),u=!1):(l=o,u=!0),r>n?(c=h(n),d=!1):(c=r,d=!0),p.push({event:s,start:l,end:c,isStart:u,isEnd:d,msLength:c-l}));return p.sort(F)}function o(e){return e.end?h(e.end):u(h(e.start),y("defaultEventMinutes"))}function r(i,n){var a,s,o,r,l,u,h,p,f,m,g,v,w,x,A,_,C,T,E,$=i.length,I="",M=D();for(E=(T=y("isRTL"))?-1:1,a=0;$>a;a++)s=i[a],o=s.event,r=N(s.start,s.start),l=N(s.start,s.end),u=s.col,h=s.level,p=s.forward||0,f=z(u),m=j(u)-f,m=Math.min(m-6,.95*m),g=h?m/(h+p+1):p?2*(m/(p+1)-6):m,v=f+m/(h+p+1)*h*E+(T?m-g:0),s.top=r,s.left=v,s.outerWidth=g,s.outerHeight=l-r,I+=c(o,s);for(M[0].innerHTML=I,w=M.children(),a=0;$>a;a++)s=i[a],o=s.event,x=e(w[a]),A=b("eventRender",o,o,x),A===!1?x.remove():(A&&A!==!0&&(x.remove(),x=e(A).css({position:"absolute",top:s.top,left:s.left}).appendTo(M)),s.element=x,o._id===n?d(o,x,s):x[0]._fci=a,Y(o,x));for(k(M,i,d),a=0;$>a;a++)s=i[a],(x=s.element)&&(s.vsides=P(x,!0),s.hsides=S(x,!0),_=x.find(".fc-event-title"),_.length&&(s.contentTop=_[0].offsetTop));for(a=0;$>a;a++)s=i[a],(x=s.element)&&(x[0].style.width=Math.max(0,s.outerWidth-s.hsides)+"px",C=Math.max(0,s.outerHeight-s.vsides),x[0].style.height=C+"px",o=s.event,s.contentTop!==t&&C-s.contentTop<10&&(x.find("div.fc-event-time").text(ot(o.start,y("timeFormat"))+" - "+o.title),x.find("div.fc-event-title").remove()),b("eventAfterRender",o,o,x))}function c(e,t){var i="<",n=e.url,a=q(e,y),s=["fc-event","fc-event-vert"];return w(e)&&s.push("fc-event-draggable"),t.isStart&&s.push("fc-event-start"),t.isEnd&&s.push("fc-event-end"),s=s.concat(e.className),e.source&&(s=s.concat(e.source.className||[])),i+=n?"a href='"+B(e.url)+"'":"div",i+=" class='"+s.join(" ")+"'"+" style="+"'"+"position:absolute;"+"top:"+t.top+"px;"+"left:"+t.left+"px;"+a+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+B(rt(e.start,e.end,y("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+B(e.title||"")+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",t.isEnd&&x(e)&&(i+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),i+="</"+(n?"a":"div")+">"}function d(e,t,i){var n=t.find("div.fc-event-time");w(e)&&m(e,t,n),i.isEnd&&x(e)&&g(e,t,n),C(e,t)}function p(e,t,i){function n(){c||(t.width(a).height("").draggable("option","grid",null),c=!0)}var a,s,o,r=i.isStart,c=!0,u=I(),d=W(),p=U(),m=V(),g=O();t.draggable({opacity:y("dragOpacity","month"),revertDuration:y("dragRevertDuration"),start:function(i,g){b("eventDragStart",t,e,i,g),K(e,t),a=t.width(),u.start(function(i,a){if(et(),i){s=!1;var u=R(0,a.col),g=R(0,i.col);o=f(g,u),i.row?r?c&&(t.width(d-10),T(t,p*Math.round((e.end?(e.end-e.start)/_t:y("defaultEventMinutes"))/m)),t.draggable("option","grid",[d,1]),c=!1):s=!0:(Z(l(h(e.start),o),l(A(e),o)),n()),s=s||c&&!o
}else n(),s=!0;t.draggable("option","revert",s)},i,"drag")},stop:function(i,a){if(u.stop(),et(),b("eventDragStop",t,e,i,a),s)n(),t.css("filter",""),X(e,t);else{var r=0;c||(r=Math.round((t.offset().top-G().offset().top)/p)*m+g-(60*e.start.getHours()+e.start.getMinutes())),Q(this,e,o,r,c,i,a)}}})}function m(e,t,i){function n(){et(),r&&(d?(i.hide(),t.draggable("option","grid",null),Z(l(h(e.start),w),l(A(e),w))):(a(x),i.css("display",""),t.draggable("option","grid",[T,S])))}function a(t){var n,a=u(h(e.start),t);e.end&&(n=u(h(e.end),t)),i.text(rt(a,n,y("timeFormat")))}var s,o,r,c,d,p,m,g,w,x,_,k=v.getCoordinateGrid(),C=H(),T=W(),S=U(),E=V();t.draggable({scroll:!1,grid:[T,S],axis:1==C?"y":!1,opacity:y("dragOpacity"),revertDuration:y("dragRevertDuration"),start:function(i,n){b("eventDragStart",t,e,i,n),K(e,t),k.build(),s=t.position(),o=k.cell(i.pageX,i.pageY),r=c=!0,d=p=L(o),m=g=0,w=0,x=_=0},drag:function(e,i){var a=k.cell(e.pageX,e.pageY);if(r=!!a){if(d=L(a),m=Math.round((i.position.left-s.left)/T),m!=g){var l=R(0,o.col),u=o.col+m;u=Math.max(0,u),u=Math.min(C-1,u);var h=R(0,u);w=f(h,l)}d||(x=Math.round((i.position.top-s.top)/S)*E)}(r!=c||d!=p||m!=g||x!=_)&&(n(),c=r,p=d,g=m,_=x),t.draggable("option","revert",!r)},stop:function(i,a){et(),b("eventDragStop",t,e,i,a),r&&(d||w||x)?Q(this,e,w,d?0:x,d,i,a):(r=!0,d=!1,m=0,w=0,x=0,n(),t.css("filter",""),t.css(s),X(e,t))}})}function g(e,t,i){var n,a,s=U(),o=V();t.resizable({handles:{s:".ui-resizable-handle"},grid:s,start:function(i,s){n=a=0,K(e,t),b("eventResizeStart",this,e,i,s)},resize:function(r,l){n=Math.round((Math.max(s,t.height())-l.originalSize.height)/s),n!=a&&(i.text(rt(e.start,n||e.end?u(_(e),o*n):null,y("timeFormat"))),a=n)},stop:function(i,a){b("eventResizeStop",this,e,i,a),n?J(this,e,0,o*n,i,a):X(e,t)}})}var v=this;v.renderEvents=i,v.clearEvents=n,v.slotSegHtml=c,st.call(v);var y=v.opt,b=v.trigger,w=v.isEventDraggable,x=v.isEventResizable,_=v.eventEnd,C=v.eventElementHandlers,E=v.setHeight,$=v.getDaySegmentContainer,D=v.getSlotSegmentContainer,I=v.getHoverListener,M=v.getMaxMinute,O=v.getMinMinute,N=v.timePosition,L=v.getIsCellAllDay,z=v.colContentLeft,j=v.colContentRight,R=v.cellToDate,F=v.segmentCompare,H=v.getColCnt,W=v.getColWidth,U=v.getSnapHeight,V=v.getSnapMinutes,G=v.getSlotContainer,Y=v.reportEventElement,X=v.showEvents,K=v.hideEvents,Q=v.eventDrop,J=v.eventResize,Z=v.renderDayOverlay,et=v.clearOverlays,nt=v.renderDayEvents,at=v.calendar,ot=at.formatDate,rt=at.formatDates;v.draggableDayEvent=p}function tt(e){var t,i,n,a,s,o=[],r=e.length;for(t=0;r>t;t++){for(i=e[t],n=0;;){if(a=!1,o[n])for(s=0;s<o[n].length;s++)if(nt(o[n][s],i)){a=!0;break}if(!a)break;n++}o[n]?o[n].push(i):o[n]=[i]}return o}function it(e){var t,i,n,a,s,o;for(t=e.length-1;t>0;t--)for(a=e[t],i=0;i<a.length;i++)for(s=a[i],n=0;n<e[t-1].length;n++)o=e[t-1][n],nt(s,o)&&(o.forward=Math.max(o.forward||0,(s.forward||0)+1))}function nt(e,t){return e.end>t.start&&e.start<t.end}function at(i,n,a){function s(t,i){var n=X[t];return e.isPlainObject(n)?R(n,i||a):n}function o(e,t){return n.trigger.apply(n,[e,t||F].concat(Array.prototype.slice.call(arguments,2),[F]))}function r(e){var t=e.source||{};return U(e.startEditable,t.startEditable,s("eventStartEditable"),e.editable,t.editable,s("editable"))&&!s("disableDragging")}function c(e){var t=e.source||{};return U(e.durationEditable,t.durationEditable,s("eventDurationEditable"),e.editable,t.editable,s("editable"))&&!s("disableResizing")}function d(e){V={};var t,i,n=e.length;for(t=0;n>t;t++)i=e[t],V[i._id]?V[i._id].push(i):V[i._id]=[i]}function p(){V={},G={},Y=[]}function m(e){return e.end?h(e.end):H(e)}function g(e,t){Y.push({event:e,element:t}),G[e._id]?G[e._id].push(t):G[e._id]=[t]}function v(){e.each(Y,function(e,t){F.trigger("eventDestroy",t.event,t.event,t.element)})}function y(e,t){t.click(function(i){return t.hasClass("ui-draggable-dragging")||t.hasClass("ui-resizable-resizing")?void 0:o("eventClick",this,e,i)}).hover(function(t){o("eventMouseover",this,e,t)},function(t){o("eventMouseout",this,e,t)})}function b(e,t){x(e,t,"show")}function w(e,t){x(e,t,"hide")}function x(e,t,i){var n,a=G[e._id],s=a.length;for(n=0;s>n;n++)t&&a[n][0]==t[0]||a[n][i]()}function A(e,t,i,n,a,s,r){var l=t.allDay,c=t._id;k(V[c],i,n,a),o("eventDrop",e,t,i,n,a,function(){k(V[c],-i,-n,l),W(c)},s,r),W(c)}function _(e,t,i,n,a,s){var r=t._id;C(V[r],i,n),o("eventResize",e,t,i,n,function(){C(V[r],-i,-n),W(r)},a,s),W(r)}function k(e,i,n,a){n=n||0;for(var s,o=e.length,r=0;o>r;r++)s=e[r],a!==t&&(s.allDay=a),u(l(s.start,i,!0),n),s.end&&(s.end=u(l(s.end,i,!0),n)),q(s,X)}function C(e,t,i){i=i||0;for(var n,a=e.length,s=0;a>s;s++)n=e[s],n.end=u(l(m(n),t,!0),i),q(n,X)}function T(e){return"object"==typeof e&&(e=e.getDay()),J[e]}function S(){return K}function E(e,t,i){for(t=t||1;J[(e.getDay()+(i?t:0)+7)%7];)l(e,t)}function $(){var e=D.apply(null,arguments),t=P(e),i=I(t);return i}function D(e,t){var i=F.getColCnt(),n=tt?-1:1,a=tt?i-1:0;"object"==typeof e&&(t=e.col,e=e.row);var s=e*i+(t*n+a);return s}function P(e){var t=F.visStart.getDay();return e+=Z[t],7*Math.floor(e/K)+et[(e%K+K)%K]-t}function I(e){var t=h(F.visStart);return l(t,e),t}function M(e){var t=O(e),i=N(t),n=L(i);return n}function O(e){return f(e,F.visStart)}function N(e){var t=F.visStart.getDay();return e+=t,Math.floor(e/7)*K+Z[(e%7+7)%7]-Z[t]}function L(e){var t=F.getColCnt(),i=tt?-1:1,n=tt?t-1:0,a=Math.floor(e/t),s=(e%t+t)%t*i+n;return{row:a,col:s}}function z(e,t){for(var i=F.getRowCnt(),n=F.getColCnt(),a=[],s=O(e),o=O(t),r=N(s),l=N(o)-1,c=0;i>c;c++){var u=c*n,d=u+n-1,h=Math.max(r,u),p=Math.min(l,d);if(p>=h){var f=L(h),m=L(p),g=[f.col,m.col].sort(),v=P(h)==s,y=P(p)+1==o;a.push({row:c,leftCol:g[0],rightCol:g[1],isStart:v,isEnd:y})}}return a}function j(e,t){return B(e,t)||e.event.start-t.event.start||(e.event.title||"").localeCompare(t.event.title)}function B(e,t){return"msLength"in e?t.msLength-e.msLength:t.rightCol-t.leftCol-(e.rightCol-e.leftCol)||t.event.allDay-e.event.allDay}var F=this;F.element=i,F.calendar=n,F.name=a,F.opt=s,F.trigger=o,F.isEventDraggable=r,F.isEventResizable=c,F.setEventData=d,F.clearEventData=p,F.eventEnd=m,F.reportEventElement=g,F.triggerEventDestroy=v,F.eventElementHandlers=y,F.showEvents=b,F.hideEvents=w,F.eventDrop=A,F.eventResize=_;var H=F.defaultEventEnd,q=n.normalizeEvent,W=n.reportEventChange,V={},G={},Y=[],X=n.options;F.isHiddenDay=T,F.skipHiddenDays=E,F.getCellsPerWeek=S,F.dateToCell=M,F.dateToDayOffset=O,F.dayOffsetToCellOffset=N,F.cellOffsetToCell=L,F.cellToDate=$,F.cellToCellOffset=D,F.cellOffsetToDayOffset=P,F.dayOffsetToDate=I,F.rangeToSegments=z,F.segmentCompare=j;var K,Q=s("hiddenDays")||[],J=[],Z=[],et=[],tt=s("isRTL");!function(){s("weekends")===!1&&Q.push(0,6);for(var t=0,i=0;7>t;t++)Z[t]=i,J[t]=-1!=e.inArray(t,Q),J[t]||(et[i]=t,i++);if(K=i,!K)throw"invalid hiddenDays"}()}function st(){function t(e,t){var i=n(e,!1,!0);rt(i,function(e,t){I(e.event,t)}),b(i,t),rt(i,function(e,t){E("eventAfterRender",e.event,e.event,t)})}function i(e,t,i){var a=n([e],!0,!1),s=[];return rt(a,function(e,n){e.row===t&&n.css("top",i),s.push(n[0])}),s}function n(t,i,n){var s,l,c=X(),h=i?e("<div/>"):c,p=a(t);return o(p),s=r(p),h[0].innerHTML=s,l=h.children(),i&&c.append(l),u(p,l),rt(p,function(e,t){e.hsides=S(t,!0)}),rt(p,function(e,t){t.width(Math.max(0,e.outerWidth-e.hsides))}),rt(p,function(e,t){e.outerHeight=t.outerHeight(!0)}),d(p,n),p}function a(e){for(var t=[],i=0;i<e.length;i++){var n=s(e[i]);t.push.apply(t,n)}return t}function s(e){for(var t=e.start,i=A(e),n=tt(t,i),a=0;a<n.length;a++)n[a].event=e;return n}function o(e){for(var t=T("isRTL"),i=0;i<e.length;i++){var n=e[i],a=(t?n.isEnd:n.isStart)?G:U,s=(t?n.isStart:n.isEnd)?Y:V,o=a(n.leftCol),r=s(n.rightCol);n.left=o,n.outerWidth=r-o}}function r(e){for(var t="",i=0;i<e.length;i++)t+=c(e[i]);return t}function c(e){var t="",i=T("isRTL"),n=e.event,a=n.url,s=["fc-event","fc-event-hori"];$(n)&&s.push("fc-event-draggable"),e.isStart&&s.push("fc-event-start"),e.isEnd&&s.push("fc-event-end"),s=s.concat(n.className),n.source&&(s=s.concat(n.source.className||[]));var o=q(n,T);return t+=a?"<a href='"+B(a)+"'":"<div",t+=" class='"+s.join(" ")+"'"+" style="+"'"+"position:absolute;"+"left:"+e.left+"px;"+o+"'"+">"+"<div class='fc-event-inner blue'>",!n.allDay&&e.isStart&&(t+="<span class='fc-event-time'>"+B(K(n.start,n.end,T("timeFormat")))+"</span>"),t+="<span class='fc-event-title'>"+B(n.title||"")+"</span>"+"</div>",e.isEnd&&D(n)&&(t+="<div class='ui-resizable-handle ui-resizable-"+(i?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),t+="</"+(a?"a":"div")+">"}function u(t,i){for(var n=0;n<t.length;n++){var a=t[n],s=a.event,o=i.eq(n),r=E("eventRender",s,s,o);r===!1?o.remove():(r&&r!==!0&&(r=e(r).css({position:"absolute",left:a.left}),o.replaceWith(r),o=r),a.element=o)}}function d(e,t){var i=p(e),n=y(),a=[];if(t)for(var s=0;s<n.length;s++)n[s].height(i[s]);for(var s=0;s<n.length;s++)a.push(n[s].position().top);rt(e,function(e,t){t.css("top",a[e.row]+e.top)})}function p(e){for(var t=R(),i=H(),n=[],a=m(e),s=0;t>s;s++){for(var o=a[s],r=[],l=0;i>l;l++)r.push(0);for(var c=0;c<o.length;c++){var u=o[c];u.top=z(r.slice(u.leftCol,u.rightCol+1));for(var l=u.leftCol;l<=u.rightCol;l++)r[l]=u.top+u.outerHeight}n.push(z(r))}return n}function m(e){var t,i,n,a=R(),s=[];for(t=0;t<e.length;t++)i=e[t],n=i.row,i.element&&(s[n]?s[n].push(i):s[n]=[i]);for(n=0;a>n;n++)s[n]=g(s[n]||[]);return s}function g(e){for(var t=[],i=v(e),n=0;n<i.length;n++)t.push.apply(t,i[n]);return t}function v(e){e.sort(it);for(var t=[],i=0;i<e.length;i++){for(var n=e[i],a=0;a<t.length&&ot(n,t[a]);a++);t[a]?t[a].push(n):t[a]=[n]}return t}function y(){var e,t=R(),i=[];for(e=0;t>e;e++)i[e]=W(e).find("div.fc-day-content > div");return i}function b(e,t){var i=X();rt(e,function(e,i,n){var a=e.event;a._id===t?w(a,i,e):i[0]._fci=n}),k(i,e,w)}function w(e,t,i){$(e)&&C.draggableDayEvent(e,t,i),i.isEnd&&D(e)&&C.resizableDayEvent(e,t,i),M(e,t)}function x(e,t){var i,n=et();t.draggable({delay:50,opacity:T("dragOpacity"),revertDuration:T("dragRevertDuration"),start:function(a,s){E("eventDragStart",t,e,a,s),N(e,t),n.start(function(n,a,s,o){if(t.draggable("option","revert",!n||!s&&!o),J(),n){var r=nt(a),c=nt(n);i=f(c,r),Q(l(h(e.start),i),l(A(e),i))}else i=0},a,"drag")},stop:function(a,s){n.stop(),J(),E("eventDragStop",t,e,a,s),i?L(this,e,i,0,e.allDay,a,s):(t.css("filter",""),O(e,t))}})}function _(t,n,a){var s=T("isRTL"),o=s?"w":"e",r=n.find(".ui-resizable-"+o),c=!1;F(n),n.mousedown(function(e){e.preventDefault()}).click(function(e){c&&(e.preventDefault(),e.stopImmediatePropagation())}),r.mousedown(function(s){function r(i){E("eventResizeStop",this,t,i),e("body").css("cursor",""),u.stop(),J(),d&&j(this,t,d,0,i),setTimeout(function(){c=!1},0)}if(1==s.which){c=!0;var u=et();R(),H();var d,h,p=n.css("top"),f=e.extend({},t),m=ct(lt(t.start));Z(),e("body").css("cursor",o+"-resize").one("mouseup",r),E("eventResizeStart",this,t,s),u.start(function(n,s){if(n){var r=at(s),c=at(n);if(c=Math.max(c,m),d=st(c)-st(r)){f.end=l(P(t),d,!0);var u=h;h=i(f,a.row,p),h=e(h),h.find("*").css("cursor",o+"-resize"),u&&u.remove(),N(t)}else h&&(O(t),h.remove(),h=null);J(),Q(t.start,l(A(t),d))}},s)}})}var C=this;C.renderDayEvents=t,C.draggableDayEvent=x,C.resizableDayEvent=_;var T=C.opt,E=C.trigger,$=C.isEventDraggable,D=C.isEventResizable,P=C.eventEnd,I=C.reportEventElement,M=C.eventElementHandlers,O=C.showEvents,N=C.hideEvents,L=C.eventDrop,j=C.eventResize,R=C.getRowCnt,H=C.getColCnt;C.getColWidth;var W=C.allDayRow,U=C.colLeft,V=C.colRight,G=C.colContentLeft,Y=C.colContentRight;C.dateToCell;var X=C.getDaySegmentContainer,K=C.calendar.formatDates,Q=C.renderDayOverlay,J=C.clearOverlays,Z=C.clearSelection,et=C.getHoverListener,tt=C.rangeToSegments,it=C.segmentCompare,nt=C.cellToDate,at=C.cellToCellOffset,st=C.cellOffsetToDayOffset,lt=C.dateToDayOffset,ct=C.dayOffsetToCellOffset}function ot(e,t){for(var i=0;i<t.length;i++){var n=t[i];if(n.leftCol<=e.rightCol&&n.rightCol>=e.leftCol)return!0}return!1}function rt(e,t){for(var i=0;i<e.length;i++){var n=e[i],a=n.element;a&&t(n,a,i)}}function lt(){function t(e,t,a){i(),t||(t=l(e,a)),c(e,t,a),n(e,t,a)}function i(e){d&&(d=!1,u(),r("unselect",null,e))}function n(e,t,i,n){d=!0,r("select",null,e,t,i,n)}function a(t){var a=s.cellToDate,r=s.getIsCellAllDay,l=s.getHoverListener(),d=s.reportDayClick;if(1==t.which&&o("selectable")){i(t);var h;l.start(function(e,t){u(),e&&r(e)?(h=[a(t),a(e)].sort(L),c(h[0],h[1],!0)):h=null},t),e(document).one("mouseup",function(e){l.stop(),h&&(+h[0]==+h[1]&&d(h[0],!0,e),n(h[0],h[1],!0,e))})}}var s=this;s.select=t,s.unselect=i,s.reportSelection=n,s.daySelectionMousedown=a;var o=s.opt,r=s.trigger,l=s.defaultSelectionEnd,c=s.renderSelection,u=s.clearSelection,d=!1;o("selectable")&&o("unselectAuto")&&e(document).mousedown(function(t){var n=o("unselectCancel");n&&e(t.target).parents(n).length||i(t)})}function ct(){function t(t,i){var n=s.shift();return n||(n=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),n[0].parentNode!=i[0]&&n.appendTo(i),a.push(n.css(t).show()),n}function i(){for(var e;e=a.shift();)s.push(e.hide().unbind())}var n=this;n.renderOverlay=t,n.clearOverlays=i;var a=[],s=[]}function ut(e){var t,i,n=this;n.build=function(){t=[],i=[],e(t,i)},n.cell=function(e,n){var a,s=t.length,o=i.length,r=-1,l=-1;for(a=0;s>a;a++)if(n>=t[a][0]&&n<t[a][1]){r=a;break}for(a=0;o>a;a++)if(e>=i[a][0]&&e<i[a][1]){l=a;break}return r>=0&&l>=0?{row:r,col:l}:null},n.rect=function(e,n,a,s,o){var r=o.offset();return{top:t[e][0]-r.top,left:i[n][0]-r.left,width:i[s][1]-i[n][0],height:t[a][1]-t[e][0]}}}function dt(t){function i(e){ht(e);var i=t.cell(e.pageX,e.pageY);(!i!=!o||i&&(i.row!=o.row||i.col!=o.col))&&(i?(s||(s=i),a(i,s,i.row-s.row,i.col-s.col)):a(i,s),o=i)}var n,a,s,o,r=this;r.start=function(r,l,c){a=r,s=o=null,t.build(),i(l),n=c||"mousemove",e(document).bind(n,i)},r.stop=function(){return e(document).unbind(n,i),o}}function ht(e){e.pageX===t&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function pt(e){function i(t){return a[t]=a[t]||e(t)}var n=this,a={},s={},o={};n.left=function(e){return s[e]=s[e]===t?i(e).position().left:s[e]},n.right=function(e){return o[e]=o[e]===t?n.left(e)+i(e).width():o[e]},n.clear=function(){a={},s={},o={}}}var ft={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"prev,today,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'><i class='icon-angle-left'></i></span>",next:"<span class='fc-text-arrow'><i class='icon-angle-right'></i></span>",prevYear:"<span class='fc-text-arrow'><i class='icon-double-angle-left'></i></span>",nextYear:"<span class='fc-text-arrow'><i class='icon-double-angle-right'></i></span>",today:"Today",month:"Month",week:"Week",day:"Day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},mt={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},gt=e.fullCalendar={version:"1.6.3"},vt=gt.views={};e.fn.fullCalendar=function(i){if("string"==typeof i){var a,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=e.data(this,"fullCalendar");if(n&&e.isFunction(n[i])){var o=n[i].apply(n,s);a===t&&(a=o),"destroy"==i&&e.removeData(this,"fullCalendar")}}),a!==t?a:this}var o=i.eventSources||[];return delete i.eventSources,i.events&&(o.push(i.events),delete i.events),i=e.extend(!0,{},ft,i.isRTL||i.isRTL===t&&ft.isRTL?mt:{},i),this.each(function(t,a){var s=e(a),r=new n(s,i,o);s.data("fullCalendar",r),r.render()}),this},gt.sourceNormalizers=[],gt.sourceFetchers=[];var yt={dataType:"json",cache:!1},bt=1;gt.addDays=l,gt.cloneDate=h,gt.parseDate=g,gt.parseISO8601=v,gt.parseTime=y,gt.formatDate=b,gt.formatDates=w;var wt=["sun","mon","tue","wed","thu","fri","sat"],xt=864e5,At=36e5,_t=6e4,kt={s:function(e){return e.getSeconds()},ss:function(e){return j(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return j(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return j(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return j(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return j(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return j(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return e.getHours()<12?"a":"p"},tt:function(e){return e.getHours()<12?"am":"pm"},T:function(e){return e.getHours()<12?"A":"P"},TT:function(e){return e.getHours()<12?"AM":"PM"},u:function(e){return b(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();return t>10&&20>t?"th":["st","nd","rd"][t%10-1]||"th"},w:function(e,t){return t.weekNumberCalculation(e)},W:function(e){return x(e)}};gt.dateFormatters=kt,gt.applyAll=W,vt.month=V,vt.basicWeek=G,vt.basicDay=Y,i({weekMode:"fixed"}),vt.agendaWeek=Q,vt.agendaDay=J,i({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})}(jQuery);